!function(a){"use strict";window.jkitdashboard=window.jkitdashboard||{},window.jkitdashboard={init:function(n){var t=this;t.xhr=null,t.container=void 0===n?a("body"):n,Notiflix.Notify.init({position:"right-top",zindex:999999,showOnlyTheLastOne:!0,success:{notiflixIconColor:"#fff"}}),t.button_save=t.container.find(".jkit-dashboard-body-wrap .jkit-form-submit>button"),t.form_handler(),t.elements(),t.admin_menu()},admin_menu:function(){this.container.find(".jkit-support-menu a, .jkit-review-menu a").attr("target","_blank")},form_handler:function(){var n=this,t="undefined"!=typeof jkit_custom_dashboard_form_id&&jkit_custom_dashboard_form_id.name?"#"+jkit_custom_dashboard_form_id.name:"#jkit-user-data-form, #jkit-settings-form, #jkit-notfound-form",e=n.container.find(t);e.find(".jkit-form-content").on("click",(function(n){n.preventDefault();var t=a(this).parents(".jkit-form-tab ");t.hasClass("collapse")?t.removeClass("collapse"):t.addClass("collapse")})),e.on("submit",(function(t){t.preventDefault();var e=a(this).attr("id"),i={},s="",o="",d="",r=/\[([^\]]+)\]/;"jkit-user-data-form"===e?s="save_user_data":"jkit-settings-form"===e?s="save_settings":"jkit-notfound-form"===e?s="save_notfound":"undefined"!=typeof jkit_custom_dashboard_form_id&&jkit_custom_dashboard_form_id.name===e&&(s="save_"+jkit_custom_dashboard_form_id.name),a(this).find("input, select").each((function(n){o=r.exec(a(this).attr("name")),d=a(this).val(),i[o[1]]=d})),n.button_save.addClass("saving"),n.button_save.find("i").removeClass("fa-save").addClass("fa-spinner fa-spin"),a.ajax({type:"POST",url:"undefined"!=typeof jkit_custom_ajax_url?jkit_custom_ajax_url:jkit_ajax_url,data:{form_data:i,action:s,nonce:jkit_nonce},dataType:"json",encode:!0}).done((function(a){Notiflix.Notify.success(a.message),n.button_save.removeClass("saving"),n.button_save.find("i").removeClass("fa-spinner fa-spin").addClass("fa-save")})).fail((function(){Notiflix.Notify.failure(jkit_dashboard_localize.save_failed),n.button_save.removeClass("saving"),n.button_save.find("i").removeClass("fa-spinner fa-spin").addClass("fa-save")}))}))},elements:function(){var n=this,t=n.container.find(".element-checkbox-option .switch"),e=n.container.find(".jkit-button.enable-all"),i=n.container.find(".jkit-button.disable-all"),s=n.container.find("#jkit-elements-enable-form");t.on("click",(function(n){n.preventDefault();var t=a(this).prev("input");t.is(":checked")?t.prop("checked",!1):t.prop("checked",!0)})),e.on("click",(function(a){a.preventDefault(),t.prev("input").prop("checked",!0)})),i.on("click",(function(a){a.preventDefault(),t.prev("input").prop("checked",!1)})),s.on("submit",(function(e){e.preventDefault();var i={};n.button_save.addClass("saving"),n.button_save.find("i").removeClass("fa-save").addClass("fa-spinner fa-spin"),t.each((function(n,t){var e=a(t).prev("input"),s=e.data("element-key");i[s]=e.is(":checked")})),a.ajax({type:"POST",url:jkit_ajax_url,data:{form_data:i,action:"save_elements_enable",nonce:jkit_nonce},dataType:"json",encode:!0}).done((function(a){Notiflix.Notify.success(a.message),n.button_save.removeClass("saving"),n.button_save.find("i").removeClass("fa-spinner fa-spin").addClass("fa-save")})).fail((function(){Notiflix.Notify.failure(jkit_dashboard_localize.save_failed),n.button_save.removeClass("saving"),n.button_save.find("i").removeClass("fa-spinner fa-spin").addClass("fa-save")}))}))}},a(document).on("ready",(function(){window.jkitdashboard.init()}))}(jQuery);